/*
ARIA Slider Module R1.1.1
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
	*/
(function(a){$A.setSlider=function(e,c){var b=$A.getEl(e),d=b.parentNode,c=c||{};$A.morph(b,{id:e,role:c.role||"Slider",showHiddenBounds:false,config:{min:c.min||0,max:c.max||100,now:c.now||0,v2i:function(g,f){if(!c.vertical){return parseInt(f/this.max*(d.clientWidth-g.offsetWidth))}else{return parseInt(f/this.max*(d.clientHeight-g.offsetHeight))}},i2v:function(g,f){if(!c.vertical){return parseInt(f/(d.clientWidth-g.offsetWidth)*this.max)}else{return parseInt(f/(d.clientHeight-g.offsetHeight)*this.max)}},degradeLbl:document.createTextNode(c.degradeLbl||"Open Manual Slider")},set:function(){var f=this;f.update.apply(f);f.onDrag.apply(f.accDCObj,[null,null,f,f.config.now,null,true])},update:function(){var f=this;f.css({top:(c.vertical)?d.offsetTop+f.config.v2i(f.accDCObj,f.config.now):"",left:(!c.vertical)?d.offsetLeft+f.config.v2i(f.accDCObj,f.config.now):""})},isDraggable:true,drag:{confineTo:d},onDrag:function(k,g,h,i,f,j){var i=(typeof i==="number"&&i>=0)?i:((!c.vertical)?h.config.i2v(h.accDCObj,h.accDCObj.offsetLeft-d.offsetLeft):h.config.i2v(h.accDCObj,h.accDCObj.offsetTop-d.offsetTop));if(h.config.past!=i){h.config.now=h.config.past=i;$A.setAttr(h.accDCObj,{"aria-valuenow":i,"aria-valuetext":(c.valueText&&typeof c.valueText==="function")?c.valueText(h,i):i});if(h.config.manual&&!f){h.config.sel.value=i.toString()}}if(!j&&c.onDrag&&typeof c.onDrag==="function"){c.onDrag.apply(this,[k,g,h,i])}},keyDown:function(h,f){var g=h.which||h.keyCode;if((g>=37&&g<=40)||(g>=33&&g<=36)){if((g==37||g==38)&&f.config.now>f.config.min){f.config.now--}else{if((g==39||g==40)&&f.config.now<f.config.max){f.config.now++}else{if(g==36){f.config.now=f.config.min}else{if(g==35){f.config.now=f.config.max}else{if(g==34){f.config.now=(f.config.now-f.config.inc)>f.config.min?f.config.now-f.config.inc:f.config.min}else{if(g==33){f.config.now=(f.config.now+f.config.inc)<f.config.max?f.config.now+f.config.inc:f.config.max}}}}}}setTimeout(function(){f.update.apply(f);f.onDrag.apply(this,[h,null,f,f.config.now])},1);h.preventDefault()}},runDuring:function(f){$A.setAttr(f.accDCObj,{tabindex:0,role:"slider","aria-orientation":c.vertical?"vertical":"horizontal","aria-label":(c.ariaLabel&&typeof c.ariaLabel==="function")?c.ariaLabel(f):f.role,"aria-valuemin":f.config.min,"aria-valuemax":f.config.max,"aria-valuenow":f.config.now,"aria-valuetext":(c.valueText&&typeof c.valueText==="function")?c.valueText(f,f.config.now):f.config.now})},runAfter:function(f){if(f.config.now){f.update.apply(f);f.onDrag.apply(f.accDCObj,[null,null,f,f.config.now])}f.config.inc=parseInt(f.config.max*0.1);f.config.degrade=$A.createEl("a",{href:"#",tabindex:"-1"},f.sraCSS,null,f.config.degradeLbl);d.appendChild(f.config.degrade);$A.bind(f.config.degrade,{click:function(j){f.config.span=$A.createEl("span",null,{position:"relative",zIndex:1000,backgroundColor:"#000",color:"#f5f5f5"});var h='<select title="'+f.role+'">';for(var g=f.config.min;g<=f.config.max;g++){h+='<option value="'+g+'">'+((c.valueText&&typeof c.valueText==="function")?c.valueText(f,g):g)+"</option>"}h+="</select>";f.config.span.innerHTML=h;d.appendChild(f.config.span);f.config.sel=f.config.span.firstChild;f.config.sel.value=f.config.now.toString();f.config.sel.focus();f.config.degrade.parentNode.removeChild(f.config.degrade);f.config.manual=true;$A.bind(f.config.sel,"keyup blur",function(k){var i=parseInt(f.config.sel.value);if(i!=f.config.now){f.config.now=i;f.update.apply(f);f.onDrag.apply(f.accDCObj,[k,null,f,i,true])}});j.preventDefault()}});$A.bind(a,"resize."+f.id,function(){f.update.apply(f)})},cssObj:{position:"absolute"},className:c.className||"nub"})}})(window);