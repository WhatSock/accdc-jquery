/*
Accordion Generator Module R2.5
Copyright 2010-2014 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.generateAccordion=function(c,h,f,i,e){var g=[],d=[],f=f||document,b=$A.query(c,f,function(k,m){if(!e&&($A.getAttr(m,"role")=="button"||$A.getAttr(m,"role")=="link")){e=true}if($A.reg[m.id]){var p=$A.reg[m.id];if(p.fn.sraCSSObj){p.fn.sraCSSObj.parentNode.removeChild(p.fn.sraCSSObj)}p.returnFocus=false;p.close();p.returnFocus=true}var n=m.id||$A.genId(),j={},l=$A.getAttr(m,"data-internal");j.id=n;j.role=$A.getAttr(m,"data-role")||"Accordion";j.autoStart=$A.getAttr(m,"data-defaultopen")?true:false;j.trigger=m;j.mode=typeof h.mode==="number"?h.mode:(h.preload?0:1);j.source=l?(function(){var o=$A.getEl(l);if(o){return o.parentNode.removeChild(o)}else{return $A.reg[m.id]&&$A.reg[m.id].source}})():(function(){var q=$A.createEl("div"),o=$A.getAttr(m,"data-src");o=o.replace("#"," #");if(h.preload){$A.load(q,o,function(){if(h.preloadImages){if(!$A.getEl(a)){document.body.appendChild($A.createEl("div",{id:a},$A.sraCSS))}h.imgLoader=$A.getEl(a);$A.query("img",q,function(r,s){if(s.src&&$A.query('img[src="'+s.src+'"]',h.imgLoader).length<1){h.imgLoader.appendChild($A.createEl("img",{src:s.src,alt:""}))}})}});return q}else{return o}})();j.isStatic="#"+$A.getAttr(m,"data-insert");j.showHiddenBounds=h.showHiddenBounds||false;j.bind="click";j.isTab=true;j.tabRole=e?"":(h.accordionRole||"Accordion");j.tabState=e?"":(h.accordionState||"Expanded");j.toggleClass=h.toggleClass||"open";j.isToggle=typeof h.isToggle==="boolean"?h.isToggle:true;j.allowCascade=true;j.runDuring=function(o){$A.setAttr(o.accDCObj,{role:"group","aria-labelledby":$A.getAttr(o.triggerObj,"id")});$A.setAttr(o.triggerObj,"aria-controls",o.accDCObjId)};j.runAfter=function(o){$A.addClass(o.triggerObj,o.toggleClass);if(e){$A.setAttr(o.triggerObj,$A.getAttr(o.triggerObj,"role")=="button"?{"aria-pressed":"true","aria-expanded":"true"}:{"aria-expanded":"true"})}if(i&&typeof i==="function"){i.apply(o.triggerObj,[o])}};j.runAfterClose=function(o){$A.remClass(o.triggerObj,o.toggleClass);if(e){$A.setAttr(o.triggerObj,$A.getAttr(o.triggerObj,"role")=="button"?{"aria-pressed":"false","aria-expanded":"false"}:{"aria-expanded":"false"})}if(i&&typeof i==="function"){i.apply(o.triggerObj,[o])}};$A.setAttr(m,{tabindex:"0"});$A.bind(m,"keydown",function(q){var o=q.which||q.keyCode;if(o==13||o==32){$A.trigger(m,"click");q.preventDefault()}});if(e){$A.setAttr(m,$A.getAttr(m,"role")=="button"?{"aria-pressed":"false","aria-expanded":"false"}:{"aria-expanded":"false"})}d.push(j);g.push(n)});$A(d,h);return g};var a="i"+$A.genId()})();