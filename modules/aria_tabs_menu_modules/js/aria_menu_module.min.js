/*
ARIA Menu Module R1.2
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
	*/
(function(c){var b={};$A.setMenu=function(d,h,f,i,g,e){$A.bind(c,"load",function(){var l=g?$A.getEl(h):$A.createEl("div"),k=i||function(){},m=function(n){a("ul.menu","ul.menu li",n);var o=[];$A.query("li.submenu",n.containerDiv,function(){o.push({id:n.id+this.id,role:"SubMenu",bind:"click",isTab:true,tabRole:"",tabState:"Open",trigger:this,topLvlId:n.topLvlId+this.id,source:b[n.topLvlId+this.id],autoPosition:3,runBefore:function(q){if(q.parent){q.offsetLeft=-(q.parent.accDCObj.offsetWidth/2)}q.offsetTop=-q.triggerObj.offsetHeight},runDuring:function(q){$A.setAttr(q.accDCObj,"role","application")},runAfter:m,cssObj:{position:"relative",zIndex:n.cssObj.zIndex+1},className:"menu",ariaLevel:n.ariaLevel+1,tabOut:n.tabOut});$A.setAttr(this,"aria-haspopup","true");if($A.reg[n.id+this.id]){var p=$A.reg[n.id+this.id];if(p.fn.sraCSSObj){p.fn.sraCSSObj.parentNode.removeChild(p.fn.sraCSSObj)}p.returnFocus=false;p.close();p.returnFocus=true}});$A(n,o);$A.query("li.link",n.containerDiv,function(){$A.bind(this,"click",function(p){n.top.close();if(k&&typeof k==="function"){k(p,this)}p.preventDefault()})})},j=function(){$A.query("ul",l,function(){b[this.id]=this.parentNode.removeChild(this)||b[this.id]});if($A.reg[f]){var n=$A.reg[f];if(n.fn.sraCSSObj){n.fn.sraCSSObj.parentNode.removeChild(n.fn.sraCSSObj)}n.returnFocus=false;n.close();n.returnFocus=true}$A([{id:f,role:"Menu",bind:"click",isToggle:true,toggleRole:"",toggleState:"Open",trigger:d,topLvlId:f,source:b[f],autoPosition:3,runOnceBefore:function(o){$A.bind(o.triggerObj,"focus",function(p){if(o.loaded&&!("ontouchstart" in c)){o.close()}})},runDuring:function(o){$A.setAttr(o.accDCObj,"role","application")},runAfter:m,cssObj:{position:"absolute",zIndex:1},className:"menu",ariaLevel:3,tabOut:function(p,o){if(!("ontouchstart" in c)){o.top.close()}}}],null,true)};if(g){j()}else{$A.load(l,h,j)}$A.setAttr($A.query(d,e)[0],"aria-haspopup","true")})};var a=function(h,g,d){var i=null,f=0;$A.query(h,d.containerDiv,function(){$A.setAttr(this,"role","menu")});var e=$A.query(g,d.containerDiv,function(){$A.setAttr(this,"role","menuitem");$A.setAttr(this,"tabindex",-1);$A.bind(this,{focus:function(k){var j=$A.inArray(this,e);if(j!==-1){f=j}if(i){$A.setAttr(i,"tabindex",-1);$A.setAttr(i,"aria-selected","false")}i=this;$A.setAttr(i,"tabindex",0);$A.setAttr(i,"aria-selected","true")},click:function(j){$A.trigger(this,"focus")},keypress:function(l){var j=l.which||l.keyCode;if(j==27||j==13){if(j==27){d.top.close()}else{if(j==13){$A.trigger(this,"click")}}l.preventDefault()}},keydown:function(l){var j=l.which||l.keyCode;if(j>=37&&j<=40){if(j==37){d.close()}else{if(j==39){$A.trigger(this,"click")}else{if(j==38){f=f===0?e.length-1:f-1}else{if(j==40){f=f===e.length-1?0:f+1}}}}if(j===38||j===40){e[f].focus()}}}})});$A.trigger(e[f],"focus")}})(window);