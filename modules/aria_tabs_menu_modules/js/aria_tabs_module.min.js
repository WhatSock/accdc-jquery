/* !
ARIA Tabs Module R1.0
Copyright 2010-2012 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setTabs=function(e,j,f,d,l){var g=[],h=[],k="",d=d||document,i=$A.query(e,d,function(n,q){var r=q.id||$A.genId(),m={},p=$A.getAttr(q,"data-internal");m.id=r;m.role=$A.getAttr(q,"data-role")||"Tab";m.autoStart=$A.getAttr(q,"data-defaultopen")?true:false;if(m.autoStart){k=n}m.trigger=q;m.mode=typeof j.mode==="number"?j.mode:(j.preload?0:1);m.source=p?(function(){var o=$A.getEl(p);if(o){return o.parentNode.removeChild(o)}else{return null}})():(function(){var t=$A.createEl("div"),o=$A.getAttr(q,"data-src");o=o.replace("#"," #");if(j.preload){$A.load(t,o,function(){if(j.preloadImages){if(!$A.getEl(a)){document.body.appendChild($A.createEl("div",{id:a},$A.sraCSS))}j.imgLoader=$A.getEl(a);$A.query("img",t,function(s,u){if(u.src&&$A.query('img[src="'+u.src+'"]',j.imgLoader).length<1){j.imgLoader.appendChild($A.createEl("img",{src:u.src,alt:""}))}})}});return t}else{return o}})();m.isStatic="#"+$A.getAttr(q,"data-insert");m.showHiddenClose=j.showHiddenClose||false;m.bind="click";m.ariaLevel=$A.getAttr(q,"data-headinglvl")||j.ariaLevel||3;m.isTab=f?false:true;m.tabRole=f?"":(j.tabRole||"Tab");m.tabState=f?"":(j.tabState||"Selected");m.toggleClass=j.toggleClass||"active";m.runAfter=function(o){$A.query(e,d,function(s,t){$A.remClass(t,o.toggleClass);if(f){$A.setAttr(t,{"aria-expanded":t==o.triggerObj?"true":"false","aria-selected":t==o.triggerObj?"true":"false"})}});$A.addClass(o.triggerObj,o.toggleClass);if(l&&typeof l==="function"){l.apply(o.triggerObj,[o])}};m.runAfterClose=function(o){$A.query(e,d,function(s,t){$A.remClass(t,o.toggleClass);if(f){$A.setAttr(t,{"aria-expanded":"false"})}})};h.push(m);g.push(r)});if(f){c(e,d,k)}else{b(e,d)}$A(h,j);return g};var c=function(d,h,j){var i=null,f=j||0,e=function(l){var k=$A.inArray(this,g);if(k!==-1){f=k}if(i){$A.setAttr(i,{tabindex:"-1","aria-selected":"false"})}i=this;$A.setAttr(i,{tabindex:"0","aria-selected":"true"});if(!l){i.focus()}},g=$A.query(d,h,function(){$A.setAttr(this,{tabindex:"-1","aria-expanded":"false","aria-selected":"false","aria-label":$A.getText(this)});$A.bind(this,{click:function(k){e.apply(this,[true]);k.preventDefault()},keydown:function(m){var l=m.which||m.keyCode;if(l>=37&&l<=40){if(l==37||l==38){f=f===0?g.length-1:f-1}else{if(l==39||l==40){f=f===g.length-1?0:f+1}}e.apply(g[f]);m.preventDefault()}else{if(l==13||l==32){$A.trigger(g[f],"click");m.preventDefault()}}}})});if(g.length){i=g[0];$A.setAttr(i,"tabindex",0)}},b=function(d,e){$A.query(d,e,function(g,h){var f=h.nodeName.toLowerCase();if(f!="a"&&f!="button"){$A.setAttr(h,{role:"link",tabindex:"0"});$A.bind(h,"keydown",function(j){var i=j.which||j.keyCode;if(i==13){$A.trigger(h,"click");j.preventDefault()}})}})},a="i"+$A.genId()})();