/*
Carousel From XML Module R2.5
Copyright 2010-2015 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setCarousel=function(o,p,i,y){var y=y||{},k=y.lNavCls||"lNav",m=y.rNavCls||"rNav",h=y.contentCls||"centerContent",j=y.btnTag||"button",l=y.btnCls||"navButton",t=y.btnSlideCls||"navSlideButton",u=y.btnGroupCls||"navGroupButton",f=y.groupNameCls||"groupName",n=y.ariaLevel||3,g=null,q={},x=o.id||"l"+$A.genId(),s={},w=$A.createEl("div"),r=y.handlers||{},v=loading=false;$A.load(w,p,function(T){g=b(T);var N="role accStart accEnd height width className prevTitle nextTitle slideName groupName btnPText btnNText btnPGText btnNGText btnPAccesskey btnNAccesskey btnPGAccesskey btnNGAccesskey direction timer animDelay hiddenMsg".split(" "),K={},R=g.documentElement,E=R.attributes.getNamedItem("forward").value=="yes"?true:false,G=R.attributes.getNamedItem("cycle").value=="yes"?true:false,P=R.attributes.getNamedItem("showGroup").value=="yes"?true:false,A=R.attributes.getNamedItem("groupPosTop").value=="yes"?true:false,F=R.attributes.getNamedItem("isGrouped").value=="yes"?true:false;for(var O=0;O<N.length;O++){K[N[O]]=R.attributes.getNamedItem(N[O]).value}q.length=0;$A.query("carousel > *",g,function(U,V){q.length+=1;if(!F){q[U]=V.childNodes[0].nodeValue;s[x+U]=V.attributes.getNamedItem("announce").value}else{q[U]={name:V.attributes.getNamedItem("name").value,length:0};$A.query("*",V,function(X,W){q[U].length+=1;q[U][X]=W.childNodes[0].nodeValue;s[x+U+X]=W.attributes.getNamedItem("announce").value})}});var S=$A.createEl("div",null,null,k),Q=$A.createEl("div",null,null,m),L=$A.createEl("div",null,null,h),C={};if(j=="a"){C.href="#"}if(j!="a"&&j!="button"){C.tabindex="0"}if(j!="button"){C.role="button"}var H=$A.createEl(j,C,null,l+" "+t),J=$A.createEl(j,C,null,l+" "+t),B=$A.createEl(j,C,null,l+" "+u),M=$A.createEl(j,C,null,l+" "+u),I=$A.createEl("div",null,{position:"relative"},"parentDivCls"),D=$A.createEl("div",null,{position:"relative",overflow:"hidden",width:"100%",height:"100%"});$A.setAttr(H,{accesskey:K.btnPAccesskey,title:a(K.prevTitle+" "+K.slideName)}).innerHTML='<span aria-hidden="true">'+K.btnPText+"</span>";H.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(K.prevTitle+" "+K.slideName)));$A.setAttr(J,{accesskey:K.btnNAccesskey,title:a(K.nextTitle+" "+K.slideName)}).innerHTML='<span aria-hidden="true">'+K.btnNText+"</span>";J.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(K.nextTitle+" "+K.slideName)));if(F){$A.setAttr(B,{accesskey:K.btnPGAccesskey,title:a(K.prevTitle+" "+K.groupName)}).innerHTML='<span aria-hidden="true">'+K.btnPGText+"</span>";B.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(K.prevTitle+" "+K.groupName)));$A.setAttr(M,{accesskey:K.btnNGAccesskey,title:a(K.nextTitle+" "+K.groupName)}).innerHTML='<span aria-hidden="true">'+K.btnNGText+"</span>";M.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(K.nextTitle+" "+K.groupName)))}var z=y.renderFn&&typeof y.renderFn==="function"?y.renderFn:function(ab,ac,V,X,W,aa,ad,Y,U,Z){ab.appendChild(ac);ab.appendChild(V);V.appendChild(X);ab.appendChild(W);ac.appendChild(aa);W.appendChild(ad);if(Y){ac.appendChild(U);W.appendChild(Z)}};z.apply(this,[I,S,L,D,Q,H,J,F,B,M]);$A([{id:x,role:K.role,showHiddenBounds:true,ariaLevel:n,showHiddenClose:false,isStatic:o,autoStart:true,source:I,className:K.className,cssObj:{height:K.height,width:K.width},btn:{P:H,N:J,PG:B,NG:M},runOnceBefore:function(U){$A(U,[{id:x+"gn",role:"Group Name",showHiddenBounds:false,className:f,allowReopen:true,returnFocus:false,cssObj:{position:"absolute"},groupName:"",runBefore:function(V){V.source="<span>"+V.groupName+"</span>"}}]);U.gdc=$A.reg[x+"gn"];if(A){U.gdc.autoPosition=1}else{U.gdc.autoPosition=5}},runDuring:function(U){$A.setAttr(U.accDCObj,{role:"region","aria-label":U.role});if(U.showHiddenBounds){U.fn.sraStart.innerHTML=U.fn.sraEnd.innerHTML=""}},runAfter:function(W){if(!e){e=$A.createEl("div",null,W.sraCSS);document.body.appendChild(e)}W.dirFlag=0;W.gdc.targetObj=d(W.accDCObj);W.gdc.triggerObj=D;var Y=[],X=$A.createEl("div");for(var Z in q){if(Z.toString()==="0"||Z>0){if(!F){if(!i){i="0"}Y.push({id:x+Z,slideVal:parseInt(Z),slideMax:q.length,autoStart:i.toString()===Z.toString()?true:false,source:q[Z]});X.innerHTML=q[Z];$A.query("img",X,function(aa,ab){e.appendChild($A.createEl("img",{src:ab.src,alt:""}))})}else{var V="";if(!i||typeof i!=="string"){V=[0,0]}else{V=i.split(",")}for(var U in q[Z]){if(U.toString()==="0"||U>0){Y.push({id:x+Z+U,slideVal:parseInt(U),slideMax:q[Z].length,groupVal:parseInt(Z),groupMax:q.length,autoStart:V[0].toString()===Z.toString()&&V[1].toString()===U.toString()?true:false,source:q[Z][U]});X.innerHTML=q[Z][U];$A.query("img",X,function(aa,ab){e.appendChild($A.createEl("img",{src:ab.src,alt:""}))})}}}}}if(K.direction!="lr"&&K.direction!="tb"){K.direction="lr"}$A(W,Y,{role:"slide",allowMultiple:true,showHiddenBounds:false,isStatic:D,append:true,cssObj:{position:"absolute"},runBefore:function(aa){aa.cssObj.height=D.clientHeight;aa.cssObj.width=D.clientWidth;if(aa.parent.firstLoaded){if(K.direction=="lr"){aa.cssObj.left=!aa.parent.dirFlag?(D.offsetLeft+D.clientLeft)-D.clientWidth:(D.offsetLeft+D.clientLeft)+D.clientWidth;aa.cssObj.top=D.offsetTop+D.clientTop}else{if(K.direction=="tb"){aa.cssObj.top=!aa.parent.dirFlag?(D.offsetTop+D.clientTop)-D.clientHeight:(D.offsetTop+D.clientTop)+D.clientHeight;aa.cssObj.left=D.offsetLeft+D.clientLeft}}}else{aa.cssObj.top=D.offsetTop+D.clientTop;aa.cssObj.left=D.offsetLeft+D.clientLeft}},runAfter:function(aa){if(F&&P&&aa.parent.gdc.groupName!=q[aa.groupVal].name){aa.parent.gdc.groupName=q[aa.groupVal].name;aa.parent.gdc.open()}if(aa.parent.cur){aa.parent.old=aa.parent.cur}aa.parent.cur=aa;if(aa.parent.firstLoaded){var ab={left:D.offsetLeft+D.clientLeft,top:D.offsetTop+D.clientTop};if(K.direction=="lr"){ab.left=!aa.parent.dirFlag?ab.left+D.offsetWidth:ab.left-D.offsetWidth}else{if(K.direction=="tb"){ab.top=!aa.parent.dirFlag?ab.top+D.offsetHeight:ab.top-D.offsetHeight}}if(F&&P&&(v||!K.timer)){$A.announce(aa.parent.gdc.groupName)}if(v||!K.timer){$A.announce(s[aa.id])}loading=true;$A.setAttr(aa.parent.old.accDCObj,"aria-hidden","true");$A.setAttr(aa.accDCObj,"aria-hidden","false");c(aa.accDCObj,aa.parent.old.accDCObj,{top:D.offsetTop+D.clientTop,left:D.offsetLeft+D.clientLeft},ab,{duration:parseInt(K.animDelay),complete:function(){if(aa&&aa.parent&&aa.accDCObj&&aa.parent.accDCObj){aa.parent.old.close();loading=false;if(r.complete&&typeof r.complete==="function"){r.complete.apply(aa,[aa])}aa.parent.setInc()}}})}else{aa.parent.firstLoaded=true;aa.parent.setInc();if(r.complete&&typeof r.complete==="function"){r.complete.apply(aa,[aa])}}}});$A.bind(window,"resize."+x,function(aa){W.cur.css({top:D.offsetTop+D.clientTop,left:D.offsetLeft+D.clientLeft})});W.pSlide=function(ae,ag){if(loading){return}var ab=null;if(r.btnPrev&&typeof r.btnPrev==="function"&&W.accDCObj){ab=r.btnPrev.apply(this,[ae,W])}if(typeof ab==="boolean"&&!ab){return false}var af="";if(W){if(!F){if(W.cur.slideVal>0){af=x+(W.cur.slideVal-1)}else{if(G){af=x+(W.cur.slideMax-1)}else{return false}}}else{var ad=W.cur.groupVal,ac=W.cur.slideVal;if(ad<1&&ac<1&&!G){return false}else{if(ac<1){ad=ad>0?ad-1:W.cur.groupMax-1;ac=q[ad].length-1}else{ac-=1}}af=x+ad+ac}}var aa=$A.reg[af];W.dirFlag=0;if(aa&&aa.id){aa.open()}};W.nSlide=function(ae,ag){if(loading){return}var ab=null;if(r.btnNext&&typeof r.btnNext==="function"&&W.accDCObj){ab=r.btnNext.apply(this,[ae,W])}if(typeof ab==="boolean"&&!ab){return false}var af="";if(W){if(!F){if(W.cur.slideVal<(W.cur.slideMax-1)){af=x+(W.cur.slideVal+1)}else{if(G){af=x+0}else{return false}}}else{var ad=W.cur.groupVal,ac=W.cur.slideVal;if(ad>=(W.cur.groupMax-1)&&ac>=(W.cur.slideMax-1)&&!G){return false}else{if(ac>=(W.cur.slideMax-1)){ad=ad<(W.cur.groupMax-1)?ad+1:0;ac=0}else{ac+=1}}af=x+ad+ac}}var aa=$A.reg[af];W.dirFlag=1;if(aa&&aa.id){aa.open()}};W.pGroup=function(ad){if(loading){return}var ab=null;if(r.btnPrevG&&typeof r.btnPrevG==="function"){ab=r.btnPrevG.apply(this,[ad,W])}if(typeof ab==="boolean"&&!ab){return false}var ae="",ac=W.cur.groupVal;if(ac<1&&!G){return false}else{ac=ac>0?ac-1:W.cur.groupMax-1;ae=x+ac+0;var aa=$A.reg[ae];W.dirFlag=0;aa.open()}};W.nGroup=function(ad){if(loading){return}var ab=null;if(r.btnNextG&&typeof r.btnNextG==="function"){ab=r.btnNextG.apply(this,[ad,W])}if(typeof ab==="boolean"&&!ab){return false}var ae="",ac=W.cur.groupVal;if(ac>=(W.cur.groupMax-1)&&!G){return false}else{ac=ac<(W.cur.groupMax-1)?ac+1:0;ae=x+ac+0;var aa=$A.reg[ae];W.dirFlag=1;aa.open()}};$A.bind(H,{click:function(aa){aa.preventDefault();W.pSlide.apply(this,[aa,W])},keydown:function(ab){var aa=ab.which||ab.keyCode;if(aa==13||aa==32){ab.preventDefault();W.pSlide.apply(this,[ab,W])}}});$A.bind(J,{click:function(aa){aa.preventDefault();W.nSlide.apply(this,[aa,W])},keydown:function(ab){var aa=ab.which||ab.keyCode;if(aa==13||aa==32){ab.preventDefault();W.nSlide.apply(this,[ab,W])}}});if(F){$A.bind(B,{click:function(aa){aa.preventDefault();W.pGroup.apply(this,[aa,W])},keydown:function(ab){var aa=ab.which||ab.keyCode;if(aa==13||aa==32){ab.preventDefault();W.pGroup.apply(this,[ab,W])}}});$A.bind(M,{click:function(aa){aa.preventDefault();W.nGroup.apply(this,[aa,W])},keydown:function(ab){var aa=ab.which||ab.keyCode;if(aa==13||aa==32){ab.preventDefault();W.nGroup.apply(this,[ab,W])}}})}if(K.timer>0){$A.bind("body","keydown."+x,function(ab){var aa=ab.which||ab.keyCode;if(aa==27&&!v){v=true;K.timer=0;ab.preventDefault()}});d(W.accDCObj).appendChild($A.createEl("div",null,W.sraCSS,null,document.createTextNode(K.hiddenMsg)))}},focusIn:function(V,U){v=true;clearTimeout(U.inc)},focusOut:function(V,U){v=false;U.setInc()},mouseOver:function(V,U){v=true;clearTimeout(U.inc)},mouseOut:function(V,U){v=false;U.setInc()},setInc:function(){var U=this;if(U.id){clearTimeout(U.inc);if(K.timer>0){U.inc=setTimeout(function(){if(v){return}if(E){U.nSlide(null,true)}else{U.pSlide(null,true)}},K.timer)}}},runBeforeClose:function(U){e.innerHTML=""},runAfterClose:function(U){$A.unbind(window,"."+x);if(U.inc){clearTimeout(U.inc)}for(var V=0;V<U.children.length;V++){$A.destroy(U.children[V].id)}$A.destroy(U.id)}}])})};var e=null,a=function(f){return f.replace(/^\s+|\s+$/g,"")},d=function(g,f){var g=g?g.firstChild:null;while(g){if(g.nodeType===1&&(!f||f.toLowerCase()===g.nodeName.toLowerCase())){break}g=g.nextSibling}return g},b=function(f){if(!f){f=""}var g;if(window.DOMParser){var h=new DOMParser();g=h.parseFromString(f,"text/xml")}else{g=new ActiveXObject("Microsoft.XMLDOM");g.async="false";g.loadXML(f)}return g},c=function(s,p,n,m,j){if(!s||!p){return}var g={},h={},q={},o={},k=j.duration||0;for(var r in n){g[r]=parseInt($A.css(s,r));q[r]=n[r]-g[r]}for(var r in m){h[r]=parseInt($A.css(p,r));o[r]=m[r]-h[r]}var f=Math.PI/(2*k),i=new Date().getTime(),l=setInterval(function(){var w=new Date().getTime()-i;if(w<k){var z=Math.abs(Math.sin(w*f)),v={},u={};for(var y in g){v[y]=Math.round(z*q[y]+g[y]);$A.css(s,y,v[y])}for(var y in h){u[y]=Math.round(z*o[y]+h[y]);$A.css(p,y,u[y])}if(j.step){j.step.apply(s,[v,u])}}else{clearInterval(l);for(var x in n){$A.css(s,x,n[x])}for(var x in m){$A.css(p,x,m[x])}if(j.complete){j.complete.apply(s,[n,m])}}},10)}})();