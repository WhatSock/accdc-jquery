/*
Carousel From XML Module R2.3
Copyright 2010-2014 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setCarousel=function(o,p,i,y){var y=y||{},k=y.lNavCls||"lNav",m=y.rNavCls||"rNav",h=y.contentCls||"centerContent",j=y.btnTag||"button",l=y.btnCls||"navButton",t=y.btnSlideCls||"navSlideButton",u=y.btnGroupCls||"navGroupButton",f=y.groupNameCls||"groupName",n=y.ariaLevel||3,g=null,q={},x=o.id||"l"+$A.genId(),s={},w=$A.createEl("div"),r=y.handlers||{},v=loading=false;$A.load(w,p,function(S){g=b(S);var M="role accStart accEnd height width className prevTitle nextTitle slideName groupName btnPText btnNText btnPGText btnNGText btnPAccesskey btnNAccesskey btnPGAccesskey btnNGAccesskey direction timer animDelay hiddenMsg".split(" "),J={},Q=g.documentElement,D=Q.attributes.getNamedItem("forward").value=="yes"?true:false,F=Q.attributes.getNamedItem("cycle").value=="yes"?true:false,O=Q.attributes.getNamedItem("showGroup").value=="yes"?true:false,z=Q.attributes.getNamedItem("groupPosTop").value=="yes"?true:false,E=Q.attributes.getNamedItem("isGrouped").value=="yes"?true:false;for(var N=0;N<M.length;N++){J[M[N]]=Q.attributes.getNamedItem(M[N]).value}q.length=0;$A.query("carousel > *",g,function(T,U){q.length+=1;if(!E){q[T]=U.childNodes[0].nodeValue;s[x+T]=U.attributes.getNamedItem("announce").value}else{q[T]={name:U.attributes.getNamedItem("name").value,length:0};$A.query("*",U,function(W,V){q[T].length+=1;q[T][W]=V.childNodes[0].nodeValue;s[x+T+W]=V.attributes.getNamedItem("announce").value})}});var R=$A.createEl("div",null,null,k),P=$A.createEl("div",null,null,m),K=$A.createEl("div",null,null,h),B={};if(j=="a"){B.href="#"}if(j!="a"&&j!="button"){B.tabindex="0"}if(j!="button"){B.role="button"}var G=$A.createEl(j,B,null,l+" "+t),I=$A.createEl(j,B,null,l+" "+t),A=$A.createEl(j,B,null,l+" "+u),L=$A.createEl(j,B,null,l+" "+u),H=$A.createEl("div",null,{position:"relative"},"parentDivCls"),C=$A.createEl("div",null,{position:"relative",overflow:"hidden",width:"100%",height:"100%"});$A.setAttr(G,{accesskey:J.btnPAccesskey,title:a(J.prevTitle+" "+J.slideName)}).innerHTML='<span aria-hidden="true">'+J.btnPText+"</span>";G.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(J.prevTitle+" "+J.slideName)));$A.setAttr(I,{accesskey:J.btnNAccesskey,title:a(J.nextTitle+" "+J.slideName)}).innerHTML='<span aria-hidden="true">'+J.btnNText+"</span>";I.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(J.nextTitle+" "+J.slideName)));H.appendChild(R);H.appendChild(K);H.appendChild(P);R.appendChild(G);P.appendChild(I);K.appendChild(C);if(E){$A.setAttr(A,{accesskey:J.btnPGAccesskey,title:a(J.prevTitle+" "+J.groupName)}).innerHTML='<span aria-hidden="true">'+J.btnPGText+"</span>";A.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(J.prevTitle+" "+J.groupName)));$A.setAttr(L,{accesskey:J.btnNGAccesskey,title:a(J.nextTitle+" "+J.groupName)}).innerHTML='<span aria-hidden="true">'+J.btnNGText+"</span>";L.appendChild($A.createEl("span",null,$A.sraCSS,null,document.createTextNode(J.nextTitle+" "+J.groupName)));R.appendChild(A);P.appendChild(L)}$A([{id:x,role:J.role,accStart:J.accStart||"Start",accEnd:J.accEnd||"End",ariaLevel:n,showHiddenClose:false,isStatic:o,autoStart:true,source:H,className:J.className,cssObj:{height:J.height,width:J.width},btn:{P:G,N:I,PG:A,NG:L},runOnceBefore:function(T){$A(T,[{id:x+"gn",role:"Group Name",showHiddenBounds:false,className:f,allowReopen:true,returnFocus:false,cssObj:{position:"absolute"},groupName:"",runBefore:function(U){U.source="<span>"+U.groupName+"</span>"}}]);T.gdc=$A.reg[x+"gn"];if(z){T.gdc.autoPosition=1}else{T.gdc.autoPosition=5}},runAfter:function(V){if(!e){e=$A.createEl("div",null,V.sraCSS);document.body.appendChild(e)}V.dirFlag=0;V.gdc.targetObj=d(V.accDCObj);V.gdc.triggerObj=C;var X=[],W=$A.createEl("div");for(var Y in q){if(Y.toString()==="0"||Y>0){if(!E){if(!i){i="0"}X.push({id:x+Y,slideVal:parseInt(Y),slideMax:q.length,autoStart:i.toString()===Y.toString()?true:false,source:q[Y]});W.innerHTML=q[Y];$A.query("img",W,function(Z,aa){e.appendChild($A.createEl("img",{src:aa.src,alt:""}))})}else{var U="";if(!i||typeof i!=="string"){U=[0,0]}else{U=i.split(",")}for(var T in q[Y]){if(T.toString()==="0"||T>0){X.push({id:x+Y+T,slideVal:parseInt(T),slideMax:q[Y].length,groupVal:parseInt(Y),groupMax:q.length,autoStart:U[0].toString()===Y.toString()&&U[1].toString()===T.toString()?true:false,source:q[Y][T]});W.innerHTML=q[Y][T];$A.query("img",W,function(Z,aa){e.appendChild($A.createEl("img",{src:aa.src,alt:""}))})}}}}}if(J.direction!="lr"&&J.direction!="tb"){J.direction="lr"}$A(V,X,{role:"slide",allowMultiple:true,showHiddenBounds:false,isStatic:C,append:true,cssObj:{position:"absolute"},runBefore:function(Z){Z.cssObj.height=C.clientHeight;Z.cssObj.width=C.clientWidth;if(Z.parent.firstLoaded){if(J.direction=="lr"){Z.cssObj.left=!Z.parent.dirFlag?(C.offsetLeft+C.clientLeft)-C.clientWidth:(C.offsetLeft+C.clientLeft)+C.clientWidth;Z.cssObj.top=C.offsetTop+C.clientTop}else{if(J.direction=="tb"){Z.cssObj.top=!Z.parent.dirFlag?(C.offsetTop+C.clientTop)-C.clientHeight:(C.offsetTop+C.clientTop)+C.clientHeight;Z.cssObj.left=C.offsetLeft+C.clientLeft}}}else{Z.cssObj.top=C.offsetTop+C.clientTop;Z.cssObj.left=C.offsetLeft+C.clientLeft}},runAfter:function(Z){if(E&&O&&Z.parent.gdc.groupName!=q[Z.groupVal].name){Z.parent.gdc.groupName=q[Z.groupVal].name;Z.parent.gdc.open()}if(Z.parent.cur){Z.parent.old=Z.parent.cur}Z.parent.cur=Z;if(Z.parent.firstLoaded){var aa={left:C.offsetLeft+C.clientLeft,top:C.offsetTop+C.clientTop};if(J.direction=="lr"){aa.left=!Z.parent.dirFlag?aa.left+C.offsetWidth:aa.left-C.offsetWidth}else{if(J.direction=="tb"){aa.top=!Z.parent.dirFlag?aa.top+C.offsetHeight:aa.top-C.offsetHeight}}if(E&&O&&(v||!J.timer)){$A.announce(Z.parent.gdc.groupName)}if(v||!J.timer){$A.announce(s[Z.id])}loading=true;$A.setAttr(Z.parent.old.accDCObj,"aria-hidden","true");$A.setAttr(Z.accDCObj,"aria-hidden","false");c(Z.accDCObj,Z.parent.old.accDCObj,{top:C.offsetTop+C.clientTop,left:C.offsetLeft+C.clientLeft},aa,{duration:parseInt(J.animDelay),complete:function(){if(Z&&Z.parent&&Z.accDCObj&&Z.parent.accDCObj){Z.parent.old.close();loading=false;if(r.complete&&typeof r.complete==="function"){r.complete.apply(Z,[Z])}Z.parent.setInc()}}})}else{Z.parent.firstLoaded=true;Z.parent.setInc();if(r.complete&&typeof r.complete==="function"){r.complete.apply(Z,[Z])}}}});$A.bind(window,"resize."+x,function(Z){V.cur.css({top:C.offsetTop+C.clientTop,left:C.offsetLeft+C.clientLeft})});V.pSlide=function(ad,af){if(loading){return}var aa=null;if(r.btnPrev&&typeof r.btnPrev==="function"&&V.accDCObj){aa=r.btnPrev.apply(this,[ad,V])}if(typeof aa==="boolean"&&!aa){return false}var ae="";if(V){if(!E){if(V.cur.slideVal>0){ae=x+(V.cur.slideVal-1)}else{if(F){ae=x+(V.cur.slideMax-1)}else{return false}}}else{var ac=V.cur.groupVal,ab=V.cur.slideVal;if(ac<1&&ab<1&&!F){return false}else{if(ab<1){ac=ac>0?ac-1:V.cur.groupMax-1;ab=q[ac].length-1}else{ab-=1}}ae=x+ac+ab}}var Z=$A.reg[ae];V.dirFlag=0;if(Z&&Z.id){Z.open()}};V.nSlide=function(ad,af){if(loading){return}var aa=null;if(r.btnNext&&typeof r.btnNext==="function"&&V.accDCObj){aa=r.btnNext.apply(this,[ad,V])}if(typeof aa==="boolean"&&!aa){return false}var ae="";if(V){if(!E){if(V.cur.slideVal<(V.cur.slideMax-1)){ae=x+(V.cur.slideVal+1)}else{if(F){ae=x+0}else{return false}}}else{var ac=V.cur.groupVal,ab=V.cur.slideVal;if(ac>=(V.cur.groupMax-1)&&ab>=(V.cur.slideMax-1)&&!F){return false}else{if(ab>=(V.cur.slideMax-1)){ac=ac<(V.cur.groupMax-1)?ac+1:0;ab=0}else{ab+=1}}ae=x+ac+ab}}var Z=$A.reg[ae];V.dirFlag=1;if(Z&&Z.id){Z.open()}};V.pGroup=function(ac){if(loading){return}var aa=null;if(r.btnPrevG&&typeof r.btnPrevG==="function"){aa=r.btnPrevG.apply(this,[ac,V])}if(typeof aa==="boolean"&&!aa){return false}var ad="",ab=V.cur.groupVal;if(ab<1&&!F){return false}else{ab=ab>0?ab-1:V.cur.groupMax-1;ad=x+ab+0;var Z=$A.reg[ad];V.dirFlag=0;Z.open()}};V.nGroup=function(ac){if(loading){return}var aa=null;if(r.btnNextG&&typeof r.btnNextG==="function"){aa=r.btnNextG.apply(this,[ac,V])}if(typeof aa==="boolean"&&!aa){return false}var ad="",ab=V.cur.groupVal;if(ab>=(V.cur.groupMax-1)&&!F){return false}else{ab=ab<(V.cur.groupMax-1)?ab+1:0;ad=x+ab+0;var Z=$A.reg[ad];V.dirFlag=1;Z.open()}};$A.bind(G,{click:function(Z){Z.preventDefault();V.pSlide.apply(this,[Z,V])},keypress:function(aa){var Z=aa.which||aa.keyCode;if(Z==13||Z==32){aa.preventDefault();V.pSlide.apply(this,[aa,V])}}});$A.bind(I,{click:function(Z){Z.preventDefault();V.nSlide.apply(this,[Z,V])},keypress:function(aa){var Z=aa.which||aa.keyCode;if(Z==13||Z==32){aa.preventDefault();V.nSlide.apply(this,[aa,V])}}});if(E){$A.bind(A,{click:function(Z){Z.preventDefault();V.pGroup.apply(this,[Z,V])},keypress:function(aa){var Z=aa.which||aa.keyCode;if(Z==13||Z==32){aa.preventDefault();V.pGroup.apply(this,[aa,V])}}});$A.bind(L,{click:function(Z){Z.preventDefault();V.nGroup.apply(this,[Z,V])},keypress:function(aa){var Z=aa.which||aa.keyCode;if(Z==13||Z==32){aa.preventDefault();V.nGroup.apply(this,[aa,V])}}})}if(J.timer>0){$A.bind("body","keypress."+x,function(aa){var Z=aa.which||aa.keyCode;if(Z==27&&!v){v=true;J.timer=0;aa.preventDefault()}});d(V.accDCObj).appendChild($A.createEl("div",null,V.sraCSS,null,document.createTextNode(J.hiddenMsg)))}},focusIn:function(U,T){v=true;clearTimeout(T.inc)},focusOut:function(U,T){v=false;T.setInc()},mouseOver:function(U,T){v=true;clearTimeout(T.inc)},mouseOut:function(U,T){v=false;T.setInc()},setInc:function(){var T=this;if(T.id){clearTimeout(T.inc);if(J.timer>0){T.inc=setTimeout(function(){if(v){return}if(D){T.nSlide(null,true)}else{T.pSlide(null,true)}},J.timer)}}},runBeforeClose:function(T){e.innerHTML=""},runAfterClose:function(T){$A.unbind(window,"."+x);if(T.inc){clearTimeout(T.inc)}for(var U=0;U<T.children.length;U++){$A.destroy(T.children[U].id)}$A.destroy(T.id)}}])})};var e=null,a=function(f){return f.replace(/^\s+|\s+$/g,"")},d=function(g,f){var g=g?g.firstChild:null;while(g){if(g.nodeType===1&&(!f||f.toLowerCase()===g.nodeName.toLowerCase())){break}g=g.nextSibling}return g},b=function(f){if(!f){f=""}var g;if(window.DOMParser){var h=new DOMParser();g=h.parseFromString(f,"text/xml")}else{g=new ActiveXObject("Microsoft.XMLDOM");g.async="false";g.loadXML(f)}return g},c=function(s,p,n,m,j){if(!s||!p){return}var g={},h={},q={},o={},k=j.duration||0;for(var r in n){g[r]=parseInt($A.css(s,r));q[r]=n[r]-g[r]}for(var r in m){h[r]=parseInt($A.css(p,r));o[r]=m[r]-h[r]}var f=Math.PI/(2*k),i=new Date().getTime(),l=setInterval(function(){var w=new Date().getTime()-i;if(w<k){var z=Math.abs(Math.sin(w*f)),v={},u={};for(var y in g){v[y]=Math.round(z*q[y]+g[y]);$A.css(s,y,v[y])}for(var y in h){u[y]=Math.round(z*o[y]+h[y]);$A.css(p,y,u[y])}if(j.step){j.step.apply(s,[v,u])}}else{clearInterval(l);for(var x in n){$A.css(s,x,n[x])}for(var x in m){$A.css(p,x,m[x])}if(j.complete){j.complete.apply(s,[n,m])}}},10)}})();