/* !
Carousel From XML Module R1.0
Copyright 2010-2012 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
	*/
(function(){var e="lNav",l="rNav",d="centerContent",h="button",g="navButton",j="navSlideButton",i="navGroupButton",m="groupName",a=3;$A.setCarousel=function(o,x,u,q){var s=null,p={},t=o.id||"l"+$A.genId(),v={},r=$A.createEl("div"),q=q||{},w=loading=false;$A.load(r,x,function(R){s=k(R);var L="role accStart accEnd height width className prevTitle nextTitle slideName groupName btnPText btnNText btnPGText btnNGText btnPAccesskey btnNAccesskey btnPGAccesskey btnNGAccesskey direction timer animDelay hiddenMsg".split(" "),I={},P=s.documentElement,C=P.attributes.getNamedItem("forward").nodeValue=="yes"?true:false,E=P.attributes.getNamedItem("cycle").nodeValue=="yes"?true:false,N=P.attributes.getNamedItem("showGroup").nodeValue=="yes"?true:false,y=P.attributes.getNamedItem("groupPosTop").nodeValue=="yes"?true:false,D=P.attributes.getNamedItem("isGrouped").nodeValue=="yes"?true:false;for(var M=0;M<L.length;M++){I[L[M]]=P.attributes.getNamedItem(L[M]).nodeValue}p.length=0;$A.query("carousel > *",s,function(S,T){p.length+=1;if(!D){p[S]=T.childNodes[0].nodeValue;v[t+S]=T.attributes.getNamedItem("announce").nodeValue}else{p[S]={name:T.attributes.getNamedItem("name").nodeValue,length:0};$A.query("*",T,function(V,U){p[S].length+=1;p[S][V]=U.childNodes[0].nodeValue;v[t+S+V]=U.attributes.getNamedItem("announce").nodeValue})}});var Q=$A.createEl("div",null,null,e),O=$A.createEl("div",null,null,l),J=$A.createEl("div",null,null,d),A=h!="button"?{tabindex:0,role:"button"}:null,F=$A.createEl(h,A,null,g+" "+j),H=$A.createEl(h,A,null,g+" "+j),z=$A.createEl(h,A,null,g+" "+i),K=$A.createEl(h,A,null,g+" "+i),G=$A.createEl("div",null,{position:"relative"}),B=$A.createEl("div",null,{position:"relative",overflow:"hidden",width:"100%",height:"100%"});$A.setAttr(F,{accesskey:I.btnPAccesskey,title:f(I.prevTitle+" "+I.slideName),"aria-label":f(I.prevTitle+" "+I.slideName)}).innerHTML="<span>"+I.btnPText+"</span>";$A.setAttr(H,{accesskey:I.btnNAccesskey,title:f(I.nextTitle+" "+I.slideName),"aria-label":f(I.nextTitle+" "+I.slideName)}).innerHTML="<span>"+I.btnNText+"</span>";$A.addClass([o,Q,O,J],"clearfix");G.appendChild(Q);G.appendChild(J);G.appendChild(O);Q.appendChild(F);O.appendChild(H);J.appendChild(B);if(D){$A.setAttr(z,{accesskey:I.btnPGAccesskey,title:f(I.prevTitle+" "+I.groupName),"aria-label":f(I.prevTitle+" "+I.groupName)}).innerHTML="<span>"+I.btnPGText+"</span>";$A.setAttr(K,{accesskey:I.btnNGAccesskey,title:f(I.nextTitle+" "+I.groupName),"aria-label":f(I.nextTitle+" "+I.groupName)}).innerHTML="<span>"+I.btnNGText+"</span>";Q.appendChild(z);O.appendChild(K)}$A([{id:t,role:I.role,accStart:I.accStart||"Start",accEnd:I.accEnd||"End",ariaLevel:a,showHiddenClose:false,isStatic:o,autoStart:true,source:G,className:I.className,cssObj:{height:I.height,width:I.width},btn:{P:F,N:H,PG:z,NG:K},runOnceBefore:function(S){$A(S,[{id:t+"gn",role:"Group Name",showHiddenBounds:false,className:m,allowReopen:true,returnFocus:false,cssObj:{position:"absolute"},groupName:"",runBefore:function(T){T.source="<span>"+T.groupName+"</span>"}}]);S.gdc=$A.reg[t+"gn"];if(y){S.gdc.autoPosition=1}else{S.gdc.autoPosition=5}},runAfter:function(U){if(!c){c=$A.createEl("div",null,U.sraCSS);document.body.appendChild(c)}U.dirFlag=0;U.gdc.targetObj=n(U.accDCObj);U.gdc.triggerObj=B;var W=[],V=$A.createEl("div");for(var X in p){if(X.toString()==="0"||X>0){if(!D){if(!u){u="0"}W.push({id:t+X,slideVal:parseInt(X),slideMax:p.length,autoStart:u.toString()===X.toString()?true:false,source:p[X]});V.innerHTML=p[X];$A.query("img",V,function(Y,Z){c.appendChild($A.createEl("img",{src:Z.src,alt:""}))})}else{var T="";if(!u||typeof u!=="string"){T=[0,0]}else{T=u.split(",")}for(var S in p[X]){if(S.toString()==="0"||S>0){W.push({id:t+X+S,slideVal:parseInt(S),slideMax:p[X].length,groupVal:parseInt(X),groupMax:p.length,autoStart:T[0].toString()===X.toString()&&T[1].toString()===S.toString()?true:false,source:p[X][S]});V.innerHTML=p[X][S];$A.query("img",V,function(Y,Z){c.appendChild($A.createEl("img",{src:Z.src,alt:""}))})}}}}}if(I.direction!="lr"&&I.direction!="tb"){I.direction="lr"}$A(U,W,{role:"slide",allowMultiple:true,showHiddenBounds:false,isStatic:B,append:true,cssObj:{position:"absolute"},runBefore:function(Y){Y.cssObj.height=B.clientHeight;Y.cssObj.width=B.clientWidth;if(Y.parent.firstLoaded){if(I.direction=="lr"){Y.cssObj.left=!Y.parent.dirFlag?(B.offsetLeft+B.clientLeft)-B.clientWidth:(B.offsetLeft+B.clientLeft)+B.clientWidth;Y.cssObj.top=B.offsetTop+B.clientTop}else{if(I.direction=="tb"){Y.cssObj.top=!Y.parent.dirFlag?(B.offsetTop+B.clientTop)-B.clientHeight:(B.offsetTop+B.clientTop)+B.clientHeight;Y.cssObj.left=B.offsetLeft+B.clientLeft}}}else{Y.cssObj.top=B.offsetTop+B.clientTop;Y.cssObj.left=B.offsetLeft+B.clientLeft}},runAfter:function(Y){if(D&&N&&Y.parent.gdc.groupName!=p[Y.groupVal].name){Y.parent.gdc.groupName=p[Y.groupVal].name;Y.parent.gdc.open()}if(Y.parent.cur){Y.parent.old=Y.parent.cur}Y.parent.cur=Y;if(Y.parent.firstLoaded){var Z={left:B.offsetLeft+B.clientLeft,top:B.offsetTop+B.clientTop};if(I.direction=="lr"){Z.left=!Y.parent.dirFlag?Z.left+B.offsetWidth:Z.left-B.offsetWidth}else{if(I.direction=="tb"){Z.top=!Y.parent.dirFlag?Z.top+B.offsetHeight:Z.top-B.offsetHeight}}if(D&&N&&(w||!I.timer)){$A.announce(Y.parent.gdc.groupName)}if(w||!I.timer){$A.announce(v[Y.id])}loading=true;b(Y.accDCObj,Y.parent.old.accDCObj,{top:B.offsetTop+B.clientTop,left:B.offsetLeft+B.clientLeft},Z,{duration:parseInt(I.animDelay),complete:function(){if(Y&&Y.parent&&Y.accDCObj&&Y.parent.accDCObj){Y.parent.old.close();loading=false;if(q.complete&&typeof q.complete==="function"){q.complete.apply(Y,[Y])}Y.parent.setInc()}}})}else{Y.parent.firstLoaded=true;Y.parent.setInc();if(q.complete&&typeof q.complete==="function"){q.complete.apply(Y,[Y])}}}});$A.bind(window,"resize."+t,function(Y){U.cur.css({top:B.offsetTop+B.clientTop,left:B.offsetLeft+B.clientLeft})});U.pSlide=function(ac,ae){if(loading){return}var Z=null;if(q.btnPrev&&typeof q.btnPrev==="function"&&U.accDCObj){Z=q.btnPrev.apply(this,[ac,U])}if(typeof Z==="boolean"&&!Z){return false}var ad="";if(U){if(!D){if(U.cur.slideVal>0){ad=t+(U.cur.slideVal-1)}else{if(E){ad=t+(U.cur.slideMax-1)}else{return false}}}else{var ab=U.cur.groupVal,aa=U.cur.slideVal;if(ab<1&&aa<1&&!E){return false}else{if(aa<1){ab=ab>0?ab-1:U.cur.groupMax-1;aa=p[ab].length-1}else{aa-=1}}ad=t+ab+aa}}var Y=$A.reg[ad];U.dirFlag=0;if(Y&&Y.id){Y.open()}};U.nSlide=function(ac,ae){if(loading){return}var Z=null;if(q.btnNext&&typeof q.btnNext==="function"&&U.accDCObj){Z=q.btnNext.apply(this,[ac,U])}if(typeof Z==="boolean"&&!Z){return false}var ad="";if(U){if(!D){if(U.cur.slideVal<(U.cur.slideMax-1)){ad=t+(U.cur.slideVal+1)}else{if(E){ad=t+0}else{return false}}}else{var ab=U.cur.groupVal,aa=U.cur.slideVal;if(ab>=(U.cur.groupMax-1)&&aa>=(U.cur.slideMax-1)&&!E){return false}else{if(aa>=(U.cur.slideMax-1)){ab=ab<(U.cur.groupMax-1)?ab+1:0;aa=0}else{aa+=1}}ad=t+ab+aa}}var Y=$A.reg[ad];U.dirFlag=1;if(Y&&Y.id){Y.open()}};U.pGroup=function(ab){if(loading){return}var Z=null;if(q.btnPrevG&&typeof q.btnPrevG==="function"){Z=q.btnPrevG.apply(this,[ab,U])}if(typeof Z==="boolean"&&!Z){return false}var ac="",aa=U.cur.groupVal;if(aa<1&&!E){return false}else{aa=aa>0?aa-1:U.cur.groupMax-1;ac=t+aa+0;var Y=$A.reg[ac];U.dirFlag=0;Y.open()}};U.nGroup=function(ab){if(loading){return}var Z=null;if(q.btnNextG&&typeof q.btnNextG==="function"){Z=q.btnNextG.apply(this,[ab,U])}if(typeof Z==="boolean"&&!Z){return false}var ac="",aa=U.cur.groupVal;if(aa>=(U.cur.groupMax-1)&&!E){return false}else{aa=aa<(U.cur.groupMax-1)?aa+1:0;ac=t+aa+0;var Y=$A.reg[ac];U.dirFlag=1;Y.open()}};$A.bind(F,{click:function(Y){U.pSlide.apply(this,[Y,U])},keydown:function(Z){var Y=Z.which||Z.keyCode;if(Y==13){U.pSlide.apply(this,[Z,U])}}});$A.bind(H,{click:function(Y){U.nSlide.apply(this,[Y,U])},keydown:function(Z){var Y=Z.which||Z.keyCode;if(Y==13){U.nSlide.apply(this,[Z,U])}}});if(D){$A.bind(z,{click:function(Y){U.pGroup.apply(this,[Y,U])},keydown:function(Z){var Y=Z.which||Z.keyCode;if(Y==13){U.pGroup.apply(this,[Z,U])}}});$A.bind(K,{click:function(Y){U.nGroup.apply(this,[Y,U])},keydown:function(Z){var Y=Z.which||Z.keyCode;if(Y==13){U.nGroup.apply(this,[Z,U])}}})}if(I.timer>0){$A.bind("body","keydown."+t,function(Z){var Y=Z.which||Z.keyCode;if(Y==27){w=true;I.timer=0}});n(U.accDCObj).appendChild($A.createEl("div",null,U.sraCSS,null,document.createTextNode(I.hiddenMsg)))}},focusIn:function(T,S){w=true;clearTimeout(S.inc)},focusOut:function(T,S){w=false;S.setInc()},mouseOver:function(T,S){w=true;clearTimeout(S.inc)},mouseOut:function(T,S){w=false;S.setInc()},setInc:function(){var S=this;if(S.id){clearTimeout(S.inc);if(I.timer>0){S.inc=setTimeout(function(){if(w){return}if(C){S.nSlide(null,true)}else{S.pSlide(null,true)}},I.timer)}}},runBeforeClose:function(S){c.innerHTML=""},runAfterClose:function(S){$A.unbind(window,"."+t);if(S.inc){clearTimeout(S.inc)}for(var T=0;T<S.children.length;T++){$A.destroy(S.children[T].id)}$A.destroy(S.id)}}])})};var c=null,f=function(o){return o.replace(/^\s+|\s+$/g,"")},n=function(p,o){var p=p?p.firstChild:null;while(p){if(p.nodeType===1&&(!o||o.toLowerCase()===p.nodeName.toLowerCase())){break}p=p.nextSibling}return p},k=function(o){if(!o){o=""}var p;if(window.DOMParser){var q=new DOMParser();p=q.parseFromString(o,"text/xml")}else{p=new ActiveXObject("Microsoft.XMLDOM");p.async="false";p.loadXML(o)}return p},b=function(C,z,x,w,s){if(!C||!z){return}var p={},q={},A={},y={},u=s.duration||0;for(var B in x){p[B]=parseInt($A.css(C,B));A[B]=x[B]-p[B]}for(var B in w){q[B]=parseInt($A.css(z,B));y[B]=w[B]-q[B]}var o=Math.PI/(2*u),r=new Date().getTime(),v=setInterval(function(){var F=new Date().getTime()-r;if(F<u){var I=Math.abs(Math.sin(F*o)),E={},D={};for(var H in p){E[H]=Math.round(I*A[H]+p[H]);$A.css(C,H,E[H])}for(var H in q){D[H]=Math.round(I*y[H]+q[H]);$A.css(z,H,D[H])}if(s.step){s.step.apply(C,[E,D])}}else{clearInterval(v);for(var G in x){$A.css(C,G,x[G])}for(var G in w){$A.css(z,G,w[G])}if(s.complete){s.complete.apply(C,[x,w])}}},10)}})();