/*
Form Field Validator R1.1
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setFormFields=function(d,a,f){var b={},c=[];for(var e in a){c.push($A.getEl(e));b[e]=false}$A.query(c,function(g,k){var l=k.id,h=a[l];$A([{id:l,role:(h.overrides&&h.overrides.role)||(h.helpText?"Help":"Error"),source:h.helpText||h.errorText,triggerObj:k,returnFocus:false,showHiddenClose:false,allowReopen:true,className:(h.overrides&&h.overrides.className)||"errorTooltip",autoPosition:isNaN(h.overrides&&h.overrides.autoPosition)?3:h.overrides.autoPosition,offsetLeft:isNaN(h.overrides&&h.overrides.offsetLeft)?10:h.overrides.offsetLeft,ariaLevel:isNaN(h.overrides&&h.overrides.ariaLevel)?3:h.overrides.ariaLevel,cssObj:{position:"absolute"},runAfter:function(i){if(!h.togglePassed){$A.addClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}$A.announce(i.source,true)},runAfterClose:function(i){if(!h.togglePassed){$A.remClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}},allowCascade:true}],h.overrides);$A.bind(window,"resize",function(i){$A.reg[l].setPosition()});$A.setAttr(k,"aria-required","true");$A.bind(k,{focusin:function(m){if(h.helpText){var i=$A.reg[l];b[l]=h.validate.apply(this,[m,i]);if(!b[l]){if(h.togglePassed){$A.remClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}}else{if(h.togglePassed){$A.addClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}}}},focusout:function(m){var i=$A.reg[l];b[l]=h.validate.apply(this,[m,i]);if(h.helpText){i.close();if(h.togglePassed){if(!b[l]){$A.remClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}else{$A.addClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}}}else{if(!b[l]){if(!h.hideError){i.open()}else{i.runAfter.apply(i,[i])}}else{if(!h.hideError){i.close()}else{i.runAfterClose.apply(i,[i])}}}}});if(h.helpText){var j="";$A.bind(k,"keypress keyup",function(m){if(j!==this.value){j=this.value;var i=$A.reg[this.id];b[this.id]=h.validate.apply(this,[m,i]);if(h.togglePassed){if(!b[this.id]){$A.remClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}else{$A.addClass(i.classObj||i.targetObj||i.triggerObj,h.toggleClass||"validateError")}}}})}});$A.bind(d,"submit",function(h){var g=[];$A.query(c,function(k,l){var j=l.id;b[j]=a[j].validate.apply(l,[h,$A.reg[j]]);if(!b[j]){g.push(j)}});if(g.length){var i=$A.reg[g[0]];if(!a[g[0]].helpText&&!a[g[0]].hideError){i.open()}i.triggerObj.focus();h.preventDefault()}else{if(f&&typeof f==="function"){f.apply(this,[h,c])}}})}})();