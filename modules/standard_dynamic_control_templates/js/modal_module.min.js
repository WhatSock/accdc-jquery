/*
Modal Module R1.5
Copyright 2010-2015 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setModal=function(a){if(a&&!a.id){a.id=$A.genId()}if(typeof a.mode!=="number"){a.source=(function(){var b=$A.createEl("div");$A.load(b,a.source);return b})()}$A([a],{role:"Dialog",bind:"click",forceFocus:true,isStatic:"body",append:true,accStart:"Start",accEnd:"End",accClose:"Close",autoFix:9,allowCascade:true,runDuring:function(b){$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","true")});$A.addClass(b.containerDiv,"containerDiv");b.firstField=$A.query('*[data-first="true"]',b.containerDiv)[0];b.lastField=$A.query('*[data-last="true"]',b.containerDiv)[0];$A.setAttr(b.fn.closeLink,{"aria-hidden":"true",role:"presentation"}).innerHTML="";$A.setAttr(b.accDCObj,{role:"region","aria-label":b.role});b.fn.sraStart.innerHTML=b.fn.sraEnd.innerHTML="";$A.setAttr(b.fn.sraStart,{"aria-hidden":"true"});$A.setAttr(b.fn.sraEnd,{"aria-hidden":"true"})},runAfter:function(b){$A.bind(window,"resize.accmodal",function(c){if(b.autoFix){b.applyFix()}else{if(b.autoPosition){b.setPosition()}}});$A.bind("body","focusin.accmodal",function(c){if(b.tempFocus){b.tempFocus=null}else{if(b.lastField){b.lastField.focus()}}})},runBeforeClose:function(b){$A.unbind(window,".accmodal");$A.unbind("body",".accmodal");$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","false");$A.remAttr(this,"aria-hidden")});$A.query("*",b.containerDiv,function(c,d){$A.unbind(d,"*")})},focusIn:function(c,b){b.tempFocus=this},tabOut:function(c,b){if(b.firstField){b.firstField.focus()}},keyDown:function(d,b){var c=d.which||d.keyCode;if(c==27){b.close()}},closeClassName:"lbClose",className:"modal"},true);return a.id}})();