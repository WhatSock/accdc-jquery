/*
Modal Module R1.0
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setModal=function(a){if(a&&!a.id){a.id=$A.genId()}if(typeof a.mode!=="number"){a.source=(function(){var b=$A.createEl("div");$A.load(b,a.source);return b})()}$A([a],{role:"Dialog",bind:"click",forceFocus:true,isStatic:"body",append:true,accStart:"Start",accEnd:"End",accClose:"Close",autoFix:9,runDuring:function(b){$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","true")});$A.addClass(b.containerDiv,"containerDiv");$A.bind("body","focusin.modal",function(c){if(b.tempFocus){b.tempFocus=null}else{if(b.lastField){b.lastField.focus()}}});b.firstField=$A.query('*[data-first="true"]',b.containerDiv)[0];b.lastField=$A.query('*[data-last="true"]',b.containerDiv)[0]},focusIn:function(c,b){b.tempFocus=this},tabOut:function(c,b){if(b.firstField){b.firstField.focus()}},keyDown:function(d,b){var c=d.which||d.keyCode;if(c==27){b.close()}},runBeforeClose:function(b){$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","false");$A.remAttr(this,"aria-hidden")});$A.unbind("body",".modal")},closeClassName:"lbClose",className:"modal"},true);return a.id}})();