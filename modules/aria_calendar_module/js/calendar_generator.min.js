/*
ARIA Calendar Module R1.12
Copyright 2010-2015 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setCalendar=function(i,c,k,l,n,d){var d=d||{},h=n&&typeof n==="function"?n:function(p,o){k.value=o.range.wDays[o.range.current.wDay].lng+" "+o.range[o.range.current.month].name+" "+o.range.current.mDay+", "+o.range.current.year;o.close()},m={alt:true,ctrl:false,shift:false},f={},e=function(o){f.alt=o.altKey;f.ctrl=o.ctrlKey;f.shift=o.shiftKey};$A([{id:i,role:d.role||"Calendar",trigger:c,bind:"opendatepicker",allowReopen:true,showHiddenClose:l&&d.editor&&d.editor.show?false:true,controlType:"DatePicker",tooltipTxt:d.tooltipTxt||"Press Escape to cancel",disabledTxt:d.disabledTxt||"Disabled",commentedTxt:d.commentedTxt||"Has Comment",prevTxt:d.prevTxt||"Previous",nextTxt:d.nextTxt||"Next",monthTxt:d.monthTxt||"Month",yearTxt:d.yearTxt||"Year",autoPosition:isNaN(d.autoPosition)?9:d.autoPosition,offsetTop:isNaN(d.offsetTop)?0:d.offsetTop,offsetLeft:isNaN(d.offsetLeft)?0:d.offsetLeft,posAnchor:d.posAnchor,targetObj:d.targetObj,cssObj:{position:"absolute",zIndex:1},className:d.className||"calendar",range:{0:{name:d.months&&d.months[0]?d.months[0]:"January",max:31,disabled:{},comments:{}},1:{name:d.months&&d.months[1]?d.months[1]:"February",max:28,disabled:{},comments:{}},2:{name:d.months&&d.months[2]?d.months[2]:"March",max:31,disabled:{},comments:{}},3:{name:d.months&&d.months[3]?d.months[3]:"April",max:30,disabled:{},comments:{}},4:{name:d.months&&d.months[4]?d.months[4]:"May",max:31,disabled:{},comments:{}},5:{name:d.months&&d.months[5]?d.months[5]:"June",max:30,disabled:{},comments:{}},6:{name:d.months&&d.months[6]?d.months[6]:"July",max:31,disabled:{},comments:{}},7:{name:d.months&&d.months[7]?d.months[7]:"August",max:31,disabled:{},comments:{}},8:{name:d.months&&d.months[8]?d.months[8]:"September",max:30,disabled:{},comments:{}},9:{name:d.months&&d.months[9]?d.months[9]:"October",max:31,disabled:{},comments:{}},10:{name:d.months&&d.months[10]?d.months[10]:"November",max:30,disabled:{},comments:{}},11:{name:d.months&&d.months[11]?d.months[11]:"December",max:31,disabled:{},comments:{}},wDays:[{shrt:d.days&&d.days[0]?d.days[0].s:"S",lng:d.days&&d.days[0]?d.days[0].l:"Sunday"},{shrt:d.days&&d.days[1]?d.days[1].s:"M",lng:d.days&&d.days[1]?d.days[1].l:"Monday"},{shrt:d.days&&d.days[2]?d.days[2].s:"T",lng:d.days&&d.days[2]?d.days[2].l:"Tuesday"},{shrt:d.days&&d.days[3]?d.days[3].s:"W",lng:d.days&&d.days[3]?d.days[3].l:"Wednesday"},{shrt:d.days&&d.days[4]?d.days[4].s:"T",lng:d.days&&d.days[4]?d.days[4].l:"Thursday"},{shrt:d.days&&d.days[5]?d.days[5].s:"F",lng:d.days&&d.days[5]?d.days[5].l:"Friday"},{shrt:d.days&&d.days[6]?d.days[6].s:"S",lng:d.days&&d.days[6]?d.days[6].l:"Saturday"}],wdOffset:isNaN(d.wdOffset)?0:d.wdOffset},getWDay:function(p,t,q){var t=typeof t==="number"?t:p.range.current.wDay,s=p.range.wdOffset;if(s<0){t=(t+s)<0?7+s:t+s}else{if(s>0){t=(t+s)>6?-1+((t+s)-6):t+s}}if(q){t=6-t}return t},setFocus:function(t,r,q){if(!t){return}this.current=t;$A.query("td.day.selected",this.containerDiv,function(o,s){$A.setAttr(s,{tabindex:"-1"});$A.remClass(s,"selected")});$A.addClass(t,"selected");$A.setAttr(t,{tabindex:"0"});if(!q){t.focus()}},setCurrent:function(o){o.range.current={mDay:o.date.getDate(),month:o.date.getMonth(),year:o.date.getFullYear(),wDay:o.date.getDay()}},runOnceBefore:function(o){o.date=new Date();o.setCurrent(o)},runBefore:function(E){if(d.ajax&&typeof d.ajax==="function"&&!E.stopAjax&&!E.ajaxLoading){E.ajaxLoading=E.cancel=true;d.ajax.apply(E,[E,false])}if(E.range.current.month===1){E.range[1].max=(new Date(E.range.current.year,1,29).getMonth()==1)?29:28}E.baseId="b"+$A.genId();E.prevBtnId=E.baseId+"p";E.nextBtnId=E.baseId+"n";E.source='<table role="application" class="calendar" aria-label="'+E.role+'"><tr role="presentation"><td class="nav" accesskey="1" title="'+E.prevTxt.replace(/<|>|\"/g,"")+" "+E.yearTxt.replace(/<|>|\"/g,"")+'" aria-label="'+E.prevTxt.replace(/<|>|\"/g,"")+" "+E.yearTxt.replace(/<|>|\"/g,"")+'" role="button" id="'+E.prevBtnId+'Y" tabindex="0"><span aria-hidden="true">&#8656;</span></td><td title="'+E.tooltipTxt.replace(/<|>|\"/g,"")+'" colspan="5" class="year" role="presentation"><span>'+E.range.current.year+'</span></td><td class="nav" accesskey="2" title="'+E.nextTxt.replace(/<|>|\"/g,"")+" "+E.yearTxt.replace(/<|>|\"/g,"")+'" aria-label="'+E.nextTxt.replace(/<|>|\"/g,"")+" "+E.yearTxt.replace(/<|>|\"/g,"")+'" role="button" id="'+E.nextBtnId+'Y" tabindex="0"><span aria-hidden="true">&#8658;</span></td></tr><tr role="presentation"><td class="nav" accesskey="3" title="'+E.prevTxt.replace(/<|>|\"/g,"")+" "+E.monthTxt.replace(/<|>|\"/g,"")+'" aria-label="'+E.prevTxt.replace(/<|>|\"/g,"")+" "+E.monthTxt.replace(/<|>|\"/g,"")+'" role="button" id="'+E.prevBtnId+'" tabindex="0"><span aria-hidden="true">&#8592;</span></td><td colspan="5" class="month" role="presentation"><span>'+E.range[E.range.current.month].name+'</span></td><td class="nav" accesskey="4" title="'+E.nextTxt.replace(/<|>|\"/g,"")+" "+E.monthTxt.replace(/<|>|\"/g,"")+'" aria-label="'+E.nextTxt.replace(/<|>|\"/g,"")+" "+E.monthTxt.replace(/<|>|\"/g,"")+'" role="button" id="'+E.nextBtnId+'" tabindex="0"><span aria-hidden="true">&#8594;</span></td></tr><tr role="presentation">';var C=E.range.current.month>0?E.range.current.month-1:11,o=E.range.current.month<11?E.range.current.month+1:0;E.iter=0;for(var s=0;s<7;s++){var B=E.getWDay(E,s),A=E.range.wDays[B];if(!s){E.iter=E.iterE=(B+6)>6?-1+B:B+6;E.iterS=B}E.source+='<th class="week" title="'+A.lng+'" role="presentation"><span>'+A.shrt+"</span></th>"}E.source+='</tr><tr role="presentation">';var q=new Date();q.setDate(1);q.setMonth(E.range.current.month);q.setFullYear(E.range.current.year);var x=q.getDay();q.setDate(E.range[E.range.current.month].max);var y=q.getDay(),D=E.iterS;while(D!=x){D=(D+1)>6?0:D+1;E.source+='<td class="empty" role="presentation"><span>&nbsp;</span></td>'}E.range.track={};var r=E.range[E.range.current.month].disabled[E.range.current.year],v=E.range[E.range.current.month].disabled["*"],u=E.range[E.range.current.month].comments[E.range.current.year],t=E.range[E.range.current.month].comments["*"];for(var s=1;s<=E.range[E.range.current.month].max;s++){E.range.track[E.baseId+s]=s;q.setDate(s);var p=(r&&$A.inArray(s,r)!==-1)||(v&&$A.inArray(s,v)!==-1)?true:false,z="";if(u&&u[s]){z=u[s]}else{if(t&&t[s]){z=t[s]}}E.source+="<td ";if(p){E.source+='aria-disabled="true" '}E.source+='aria-label="';if(z){E.source+=E.commentedTxt.replace(/<|>|\"/g,"")+" "}E.source+=s+", "+E.range.wDays[q.getDay()].lng+" "+E.range[E.range.current.month].name+" "+E.range.current.year;if(z){E.source+=z.replace(/<|>|\n/g," ").replace(/\"/g,'"')}E.source+='" role="link" tabindex="-1" class="day';if(p){E.source+=" disabled"}if(z){E.source+=" comment"}E.source+='" title="';if(p){E.source+=E.disabledTxt.replace(/<|>|\"/g,"")}if(z){E.source+=" "+E.commentedTxt.replace(/<|>|\"/g,"")}E.source+='" id="'+E.baseId+s+'"><span aria-hidden="true">'+s+"</span></td>";q.setDate(s);var D=q.getDay();if(D==E.iter&&s<E.range[E.range.current.month].max){E.source+='</tr><tr role="presentation">'}}while(y!=E.iter){y=(y+1)>6?0:y+1;E.source+='<td class="empty" role="presentation"><span>&nbsp;</span></td>'}E.source+="</tr></table>";$A.find("*",function(w){if(w.controlType&&w.controlType=="DatePicker"&&w.loaded){w.close()}})},runDuring:function(o){$A.setAttr(o.accDCObj,{role:"dialog","aria-label":o.role});o.fn.sraStart.innerHTML=o.fn.sraEnd.innerHTML="";$A.setAttr(o.fn.sraStart,{"aria-hidden":"true"});$A.setAttr(o.fn.sraEnd,{"aria-hidden":"true"})},runAfter:function(o){var r=function(){var v=o.range.current.month==11?0:o.range.current.month+1,u=v>0?o.range.current.year:o.range.current.year+1,t=o.range.current.mDay>o.range[v].max?o.range[v].max:o.range.current.mDay;o.date=new Date(u,v,t);o.setCurrent(o);o.reopen=true;o.open()},p=function(){var v=o.range.current.month<1?11:o.range.current.month-1,u=v<11?o.range.current.year:o.range.current.year-1,t=o.range.current.mDay>o.range[v].max?o.range[v].max:o.range.current.mDay;o.date=new Date(u,v,t);o.setCurrent(o);o.reopen=true;o.open()},q=function(u){var w=o.range.current.month,v=u?o.range.current.year+1:o.range.current.year-1;if(w===1){o.range[1].max=28}var t=o.range.current.mDay>o.range[w].max?o.range[w].max:o.range.current.mDay;o.date=new Date(v,w,t);o.setCurrent(o);o.reopen=true;o.open()};var s=false;$A.bind("#"+o.containerDivId+" td.day",{focus:function(w){if($A.hasClass(this,"comment")){var x=o.children[0],v=o.range[o.range.current.month].comments[o.range.current.year],u=o.range[o.range.current.month].comments["*"],t="";if(v&&v[o.range.current.mDay]){t=v[o.range.current.mDay]}else{if(u&&u[o.range.current.mDay]){t=u[o.range.current.mDay]}}t=a(t.replace(/<|>/g,""));if(t){x.source=t;x.open()}}else{if(o.children[0].loaded){o.children[0].close()}}if(o.children[1].openEditor){o.children[1].openEditor=false;o.children[1].reset()}},click:function(t){o.date.setDate(o.range.track[this.id]);o.setCurrent(o);if($A.hasClass(this,"selected")||(!l&&!$A.hasClass(this,"comment"))){if($A.inArray(o.range.current.mDay,o.range[o.range.current.month].disabled[o.range.current.year]||o.range[o.range.current.month].disabled["*"]||[])===-1){h.apply(this,[t,o,k])}}else{o.setFocus(this)}t.preventDefault()},keydown:function(x){e(x);var u=x.which||x.keyCode;if(u==13){s=true;if($A.inArray(o.range.current.mDay,o.range[o.range.current.month].disabled[o.range.current.year]||o.range[o.range.current.month].disabled["*"]||[])===-1){h.apply(this,[x,o,k])}x.preventDefault()}else{if(u==32&&l&&d.editor&&d.editor.show&&!o.children[1].openEditor){o.children[1].openEditor=true;o.children[1].reset();x.preventDefault()}}if((u>=37&&u<=40)||u==27||(u>=33&&u<=36)){var w=o.range.current.wDay;if(u==37){if(w!=o.iterS&&o.range.current.mDay>1){o.range.current.mDay--;o.range.current.wDay=(w-1)<0?6:w-1;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{if(w!=o.iterS&&o.range.current.mDay==1&&w>0){var y=o.range.current.month<1?11:o.range.current.month-1,v=y<11?o.range.current.year:o.range.current.year-1,t=o.range[y].max;if(y===1){t=(new Date(v,1,29).getMonth()==1)?29:28}o.date=new Date(v,y,t);o.setCurrent(o);o.reopen=true;o.open()}}}else{if(u==39){if(w!=o.iterE&&o.range.current.mDay<o.range[o.range.current.month].max){o.range.current.mDay++;o.range.current.wDay=(w+1)>6?0:w+1;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{if(w!=o.iterE&&o.range.current.mDay==o.range[o.range.current.month].max&&w<6){var y=o.range.current.month==11?0:o.range.current.month+1,v=y>0?o.range.current.year:o.range.current.year+1;o.date=new Date(v,y,1);o.setCurrent(o);o.reopen=true;o.open()}}}else{if(u==38){if((o.range.current.mDay-7)>0){o.range.current.mDay-=7;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{var y=o.range.current.month<1?11:o.range.current.month-1,v=y<11?o.range.current.year:o.range.current.year-1;if(y===1&&(new Date(v,1,29).getMonth()==1)){o.range[y].max=29}else{if(y===1){o.range[y].max=28}}var t=o.range[y].max+(o.range.current.mDay-7);o.date=new Date(v,y,t);o.setCurrent(o);o.reopen=true;o.open()}}else{if(u==40){if((o.range.current.mDay+7)<=o.range[o.range.current.month].max){o.range.current.mDay+=7;o.setFocus(o.range.index[o.range.current.mDay-1],this)}else{var y=o.range.current.month==11?0:o.range.current.month+1,v=y>0?o.range.current.year:o.range.current.year+1,t=o.range.current.mDay+7-o.range[o.range.current.month].max;o.date=new Date(v,y,t);o.setCurrent(o);o.reopen=true;o.open()}}else{if(u==27){o.close()}else{if(u==33){if(f.alt){q(true)}else{r()}}else{if(u==34){if(f.alt){q()}else{p()}}else{if(u==36){if(w!=o.iterS&&o.range.current.mDay>1){while(o.range.current.wDay!=o.iterS&&$A.getEl(o.baseId+(o.range.current.mDay-1))){o.range.current.wDay=(o.range.current.wDay-1)<0?6:o.range.current.wDay-1;o.range.current.mDay--}o.setFocus(o.range.index[o.range.current.mDay-1],this)}}else{if(u==35){if(w!=o.iterE&&o.range.current.mDay<o.range[o.range.current.month].max){while(o.range.current.wDay!=o.iterE&&$A.getEl(o.baseId+(o.range.current.mDay+1))){o.range.current.wDay=(o.range.current.wDay+1)>6?0:o.range.current.wDay+1;o.range.current.mDay++}o.setFocus(o.range.index[o.range.current.mDay-1],this)}}}}}}}}}}x.preventDefault()}},keyup:function(u){e(u);var t=u.which||u.keyCode;if(t==13&&!s){if($A.inArray(o.range.current.mDay,o.range[o.range.current.month].disabled[o.range.current.year]||o.range[o.range.current.month].disabled["*"]||[])===-1){if(!o.setFocus.firstOpen){h.apply(this,[u,o,k])}}u.preventDefault()}s=o.setFocus.firstOpen=false}});$A.bind("#"+o.prevBtnId,{click:function(t){p();t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){p();u.preventDefault()}if(t==27){o.close();u.preventDefault()}},keyup:function(t){e(t)}});$A.bind("#"+o.nextBtnId,{click:function(t){r();t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){r();u.preventDefault()}if(t==27){o.close();u.preventDefault()}},keyup:function(t){e(t)}});$A.bind("#"+o.prevBtnId+"Y",{click:function(t){q();t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){q();u.preventDefault()}if(t==27){o.close();u.preventDefault()}},keyup:function(t){e(t)}});$A.bind("#"+o.nextBtnId+"Y",{click:function(t){q(true);t.preventDefault()},keydown:function(u){e(u);var t=u.which||u.keyCode;if(t==13||t==32){q(true);u.preventDefault()}if(t==27){o.close();u.preventDefault()}},keyup:function(t){e(t)}});o.range.index=$A.query("td.day",o.containerDiv);o.setFocus.firstOpen=true;o.setFocus(o.range.index[o.range.current.mDay-1]);if(l&&d.editor&&d.editor.show){o.children[1].open()}$A.bind(window,"resize.datepicker",function(t){o.setPosition()});$A.setAttr(o.triggerObj,"aria-expanded","true")},tabOut:function(p,o){o.close()},runAfterClose:function(o){if(!o.reopen){if(d.resetCurrent){o.date=new Date();o.setCurrent(o)}if(l){o.children[0].close()}if(l&&d.editor&&d.editor.show){o.children[1].lock=false;o.children[1].close()}}else{o.reopen=false}if(d.ajax&&typeof d.ajax==="function"){o.lock=o.ajaxLoading=false}$A.unbind(window,"resize.datepicker");$A.setAttr(o.triggerObj,"aria-expanded","false")}}]);$A.setAttr(c,"aria-expanded","false");var b=$A.reg[i],g=false,j=function(){g=false};$A.bind(c,"click",function(o){if(!g&&!b.loaded){g=true;$A.trigger(this,"opendatepicker");setTimeout(j,1000)}else{if(!g&&b.loaded){g=true;b.close();setTimeout(j,1000)}}o.preventDefault()});$A($A.reg[i],[{id:i+"commentTooltip",role:d.comments&&d.comments.role||"Comment",returnFocus:false,showHiddenClose:false,allowReopen:true,autoPosition:isNaN(d.comments&&d.comments.autoPosition)?1:d.comments.autoPosition,offsetTop:isNaN(d.comments&&d.comments.offsetTop)?0:d.comments.offsetTop,offsetLeft:isNaN(d.comments&&d.comments.offsetLeft)?0:d.comments.offsetLeft,cssObj:{position:"absolute",zIndex:$A.reg[i].cssObj.zIndex},className:d.comments&&d.comments.className||"commentTooltip",runBefore:function(o){o.triggerObj=o.parent.accDCObj}}]);$A($A.reg[i],[{id:i+"commentAdd",role:d.editor&&d.editor.role||"Edit",returnFocus:false,allowReopen:true,autoPosition:isNaN(d.editor&&d.editor.autoPosition)?6:d.editor.autoPosition,offsetTop:isNaN(d.editor&&d.editor.offsetTop)?0:d.editor.offsetTop,offsetLeft:isNaN(d.editor&&d.editor.offsetLeft)?0:d.editor.offsetLeft,cssObj:{position:"absolute",zIndex:$A.reg[i].cssObj.zIndex},className:d.editor&&d.editor.className||"commentAdd",openEditor:false,source:'<textarea style="visibility: hidden; display: none;" class="commentTa" title="'+$A.reg[i+"commentTooltip"].role+'"></textarea><button title="'+(d.editor&&d.editor.role||"Edit")+" "+$A.reg[i+"commentTooltip"].role+'" class="commentBtn">'+(d.editor&&d.editor.role||"Edit")+"</button>",runBefore:function(o){o.triggerObj=o.parent.accDCObj},runDuring:function(o){$A.setAttr(o.accDCObj,{role:"dialog","aria-label":o.role});$A.setAttr(o.containerDiv,"role","application");o.fn.sraStart.innerHTML=o.fn.sraEnd.innerHTML="";$A.setAttr(o.fn.sraStart,{"aria-hidden":"true"});$A.setAttr(o.fn.sraEnd,{"aria-hidden":"true"})},add:function(o){var p=a(o.textarea.value.replace(/<|>|\n/g," "));if(!o.comments[o.parent.range.current.year]){o.comments[o.parent.range.current.year]={}}o.comments[o.parent.range.current.year][o.parent.range.current.mDay]=p;var q=o.parent.range.current.mDay+", "+o.parent.range.wDays[o.parent.range.current.wDay].lng+" "+o.parent.range[o.parent.range.current.month].name+" "+o.parent.range.current.year,r="";if((o.parent.range[o.parent.range.current.month].disabled[o.parent.range.current.year]&&$A.inArray(o.parent.range.current.mDay,o.parent.range[o.parent.range.current.month].disabled[o.parent.range.current.year])!==-1)||(o.parent.range[o.parent.range.current.month].disabled["*"]&&$A.inArray(o.parent.range.current.mDay,o.parent.range[o.parent.range.current.month].disabled["*"])!==-1)){r+=o.parent.disabledTxt.replace(/<|>|\"/g,"")+" "}if(!p){$A.remClass(o.parent.current,"comment")}else{$A.addClass(o.parent.current,"comment");r+=o.parent.commentedTxt.replace(/<|>|\"/g,"")+" "}q=r+q;$A.setAttr(o.parent.current,{title:a(r),"aria-label":q+" "+p.replace(/\"/g,'"')})},reset:function(){var o=this;if(o.openEditor){o.comments=o.parent.range[o.parent.range.current.month].comments;if(!o.textarea){o.textarea=$A.query("textarea",o.containerDiv,function(){$A.css(this,{visibility:"",display:""});o.css("left",o.parent.accDCObj.offsetLeft);$A.bind(this,{focus:function(p){if(o.parent.children[0].loaded){o.parent.children[0].close()}},keydown:function(q){var p=q.which||q.keyCode;if(this.value.length>800){this.value=this.value.substring(0,799)}if(p==13){o.add.apply(this,[o]);o.parent.current.focus();o.openEditor=false;o.reset();q.preventDefault()}else{if(p==27){o.parent.current.focus();o.openEditor=false;o.reset();q.preventDefault()}}}})})[0]}else{$A.css(o.textarea,{visibility:"",display:""});o.css("left",o.parent.accDCObj.offsetLeft)}$A.setAttr(o.textarea,{title:o.parent.range.current.mDay+", "+o.parent.range.wDays[o.parent.range.current.wDay].lng+" "+o.parent.range[o.parent.range.current.month].name+" "+o.parent.range.current.year}).focus();if(o.comments[o.parent.range.current.year]&&o.comments[o.parent.range.current.year][o.parent.range.current.mDay]){o.textarea.value=o.comments[o.parent.range.current.year][o.parent.range.current.mDay]}$A.setAttr(o.commentBtn,{title:(d.editor&&d.editor.action1||"Save")+" "+$A.reg[i+"commentTooltip"].role}).innerHTML=d.editor&&d.editor.action1||"Save"}else{if(o.textarea){o.textarea.value="";$A.css(o.textarea,{visibility:"hidden",display:"none"})}o.css("left",o.parent.accDCObj.offsetLeft+o.parent.accDCObj.offsetWidth-o.accDCObj.offsetWidth);$A.setAttr(o.commentBtn,{title:(d.editor&&d.editor.role||"Edit")+" "+$A.reg[i+"commentTooltip"].role}).innerHTML=d.editor&&d.editor.role||"Edit"}},runAfter:function(o){$A.query("button",o.containerDiv,function(){o.commentBtn=this;$A.bind(this,{focus:function(p){if(o.parent.children[0].loaded){o.parent.children[0].close()}},click:function(p){if(o.openEditor){o.add.apply(this,[o]);o.parent.current.focus();o.openEditor=false;o.reset()}else{o.openEditor=true;o.reset()}p.preventDefault()},keydown:function(q){var p=q.which||q.keyCode;if(p==27){if(o.openEditor){o.parent.current.focus();o.openEditor=false;o.reset()}else{o.parent.close()}q.preventDefault()}}})});o.reset();o.lock=true;$A.bind(window,"resize.dateeditor",function(p){o.setPosition();o.reset()})},tabOut:function(p,o){o.parent.close()},runBeforeClose:function(o){o.openEditor=false;o.textarea=null;$A.unbind(window,"resize.dateeditor");if(d.ajax&&typeof d.ajax==="function"){d.ajax.apply(o.parent,[o.parent,true])}o.parent.setFocus.firstOpen=true},lock:l&&d.editor&&d.editor.show?false:true}])};var a=function(b){return b.replace(/^\s+|\s+$/g,"")}})();